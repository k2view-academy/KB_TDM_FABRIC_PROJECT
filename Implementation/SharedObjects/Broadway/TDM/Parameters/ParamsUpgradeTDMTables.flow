tags: TDM
stages:
  Project Dir:
    actors:
      Get Project Folder:
        parent: InnerFlow
        in:
          flowName:
            const: GetProjectFolder
        out:
          PROJECT_FOLDER:
            schema: string
  Get Lu and TDM LIB Path:
    actors:
      TDM_LIBRARY folder:
        parent: StringFormat
        in:
          format:
            const: ${projectDir}/LogicalUnits/TDM_LIBRARY/
          projectDir:
            link: Get Project Folder/PROJECT_FOLDER
            schema: string
            mandatory: false
      LU folder:
        parent: StringFormat
        in:
          format:
            const: ${projectDir}/LogicalUnits/${LU_NAME}/
          projectDir:
            link: Get Project Folder/PROJECT_FOLDER
            schema: string
            mandatory: false
          LU_NAME:
            external: LU_NAME
            schema: string
            mandatory: false
  Copy Tables:
    actors:
      Read vdb File:
        parent: FileRead
        in:
          interface:
            const: null
            link: LU folder/string
          path:
            const: vdb.k2vdb.xml
      Copy TDM Tables:
        parent: InnerFlow
        in:
          flowName:
            const: copyTDMTablesRootAndBE
          LU_PATH:
            link: LU folder/string
            schema: string
            mandatory: false
          TDM_LIBRARY_PATH:
            link: TDM_LIBRARY folder/string
            schema: string
            mandatory: false
  Parse Schema:
    actors:
      Parse vdb XML:
        parent: XmlParser
        in:
          stream:
            link: Read vdb File/stream
        out:
          object:
            schema: '#ref'
          info:
            schema: '#ref'
  Add TDM BE IIDS To Schema:
    actors:
      Add TDM tables:
        parent: JavaScript
        in:
          script:
            const:
              userCode: |-
                var arrIn = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];
                if (objIn != null) {
                  arrIn = [ ...objIn ];
                }
                if (!arrIn.some(item => item._value === "TDM_BE_IIDS")){
                  arrIn.push({"_value": "TDM_BE_IIDS"});
                }
                objOut.Tables = {"_value" : { "Table": arrIn} };
                objOut;
              script: |-
                var arrIn = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];

                if (objIn != null) {
                  arrIn = [].concat(objIn);
                }

                if (!arrIn.some(function (item) {
                  return item._value === "TDM_BE_IIDS";
                })) {
                  arrIn.push({
                    "_value": "TDM_BE_IIDS"
                  });
                }

                objOut.Tables = {
                  "_value": {
                    "Table": arrIn
                  }
                };
                objOut;
          objIn:
            link: Parse vdb XML/object/VirtualDB/_value/Tables/_value/Table
            schema: '#ref'
            mandatory: false
          tables:
            const: '[{"table_name":"FABRIC_TDM_ROOT","column_name":"IID","active":true,"population":"FABRIC_TDM_ROOT.populationFabricTdmRoot.flow","id":"IID"},{"table_name":"TDM_BE_IIDS","column_name":"iid,source_env,be_id","active":true,"population":"TDM_BE_IIDS.populationTdmBeIID.flow","id":"iid,source_env,be_id"}]'
            schema: string
            mandatory: false
        out:
          result:
            schema: '#ref'
      Set TDM Diagram Graph:
        parent: JavaScript
        in:
          script:
            const:
              userCode: |
                var arrIn = [];
                var arrTmp = [];
                var arrGroup = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];
                var tablePosX = 15;
                var tablePosY = 50;
                var posYIncrement = 150;

                if (!objIn || !objIn._value || !objIn._value.Group || objIn._value.Group.length === 0) {
                    objOut = objIn;
                } else {
                    arrIn = [...objIn];
                    arrGroup = [...objIn._value.Group];

                    tablesObjt = JSON.parse(tables);

                    for (var i = 0; i < tablesObjt.length; i++) {
                        tableObj = tablesObjt[i];

                        if (arrIn.toString().indexOf("" + tableObj.table_name) === -1) {
                            arrTmp.push({
                                "_attributes": {
                                    "name": tableObj.table_name,
                                    "pos": tablePosX + " " + tablePosY,
                                    "size": "257 136",
                                    "listGroupSize": "250 100",
                                    "viewType": "Table"
                                }
                            });
                            if (i === 0) {
                                tablePosY = 275;
                            }
                            tablePosY = (tablePosY + posYIncrement);
                        }
                    }

                    arrGroup.push({
                        "_attributes": {
                            "name": "TDM Tables",
                            "pos": (tablePosX - 4) + " " + (tablePosY - 10),
                            "size": "300 300",
                            "wasexpanded": "false",
                            "expanded": "true"
                        },
                        "_value": {
                            "Node": arrTmp
                        }
                    });

                    objOut.DiagramGraph = {
                        "_value": {
                            "Graph": {
                                "_attributes": objIn._attributes,
                                "_value": {
                                    "Group": arrGroup
                                }
                            }
                        }
                    };
                }

                objOut;
              script: |-
                var arrIn = [];
                var arrTmp = [];
                var arrGroup = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];
                var tablePosX = 15;
                var tablePosY = 50;
                var posYIncrement = 150;

                if (!objIn || !objIn._value || !objIn._value.Group || objIn._value.Group.length === 0) {
                  objOut = objIn;
                } else {
                  arrIn = [].concat(objIn);
                  arrGroup = [].concat(objIn._value.Group);
                  tablesObjt = JSON.parse(tables);

                  for (var i = 0; i < tablesObjt.length; i++) {
                    tableObj = tablesObjt[i];

                    if (arrIn.toString().indexOf("" + tableObj.table_name) === -1) {
                      arrTmp.push({
                        "_attributes": {
                          "name": tableObj.table_name,
                          "pos": tablePosX + " " + tablePosY,
                          "size": "257 136",
                          "listGroupSize": "250 100",
                          "viewType": "Table"
                        }
                      });

                      if (i === 0) {
                        tablePosY = 275;
                      }

                      tablePosY = tablePosY + posYIncrement;
                    }
                  }

                  arrGroup.push({
                    "_attributes": {
                      "name": "TDM Tables",
                      "pos": tablePosX - 4 + " " + (tablePosY - 10),
                      "size": "300 300",
                      "wasexpanded": "false",
                      "expanded": "true"
                    },
                    "_value": {
                      "Node": arrTmp
                    }
                  });
                  objOut.DiagramGraph = {
                    "_value": {
                      "Graph": {
                        "_attributes": objIn._attributes,
                        "_value": {
                          "Group": arrGroup
                        }
                      }
                    }
                  };
                }

                objOut;
          objIn:
            link: Parse vdb XML/object/VirtualDB/_value/DiagramGraph/_value/Graph
            schema: '#ref'
            mandatory: false
          tables:
            const: '[{"table_name":"FABRIC_TDM_ROOT","column_name":"IID","active":true,"population":"FABRIC_TDM_ROOT.populationFabricTdmRoot.flow","id":"IID"},{"table_name":"TDM_LU_TYPE_REL_TAR_EID","column_name":"lu_type1_eid","active":true,"id":"IID"},{"table_name":"TDM_LU_TYPE_RELATION_EID","column_name":"lu_type1_eid","active":true,"population":"TDM_LU_TYPE_RELATION_EID.populationTdmLuTypeRealtionEid.flow","id":"IID"},{"table_name":"LU_PARAMS","column_name":"ENTITY_ID","active":true,"population":"LU_PARAMS.populationLuParams.flow","id":"IID"},{"table_name":"TDM_BE_IIDS","column_name":"iid,source_env,be_id","active":true,"population":"TDM_BE_IIDS.populationTdmBeIID.flow","id":"iid,source_env,be_id,root_iid"}]'
            schema: string
            mandatory: false
        out:
          result:
            schema: '#ref'
      Set TDM Tables Relations:
        parent: JavaScript
        in:
          script:
            const:
              userCode: |
                var arrIn = [];
                var objTmp = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];

                if (objIn != null) {
                  arrIn = [ ...objIn ];
                }

                objTmp = {
                  "From": {
                    "_attributes": {
                      "tableType": "TableObject",
                      "table": "FABRIC_TDM_ROOT",
                      "column": "IID",
                      "columnId": "IID"
                    }
                  },
                  "To": {
                    "_attributes": {
                      "tableType": "TableObject",
                      "table": "TDM_BE_IIDS",
                      "populationObjectName": "populationTdmBeIID.flow",
                      "column": "iid",
                      "columnId": "iid"
                    }
                  }
                };

                if (!arrIn.some(item =>
                  item._value &&
                  item._value.From &&
                  item._value.From._attributes.table === objTmp.From._attributes.table &&
                  item._value.To &&
                  item._value.To._attributes.table === objTmp.To._attributes.table &&
                  item._value.To._attributes.populationObjectName === objTmp.To._attributes.populationObjectName
                )) {
                  arrIn.push({"_value": objTmp});
                }

                objOut.DatabaseRelations = {"_value" : { "Relation": arrIn }};
                objOut;
              script: |-
                var arrIn = [];
                var objTmp = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];

                if (objIn != null) {
                  arrIn = [].concat(objIn);
                }

                objTmp = {
                  "From": {
                    "_attributes": {
                      "tableType": "TableObject",
                      "table": "FABRIC_TDM_ROOT",
                      "column": "IID",
                      "columnId": "IID"
                    }
                  },
                  "To": {
                    "_attributes": {
                      "tableType": "TableObject",
                      "table": "TDM_BE_IIDS",
                      "populationObjectName": "populationTdmBeIID.flow",
                      "column": "iid",
                      "columnId": "iid"
                    }
                  }
                };

                if (!arrIn.some(function (item) {
                  return item._value && item._value.From && item._value.From._attributes.table === objTmp.From._attributes.table && item._value.To && item._value.To._attributes.table === objTmp.To._attributes.table && item._value.To._attributes.populationObjectName === objTmp.To._attributes.populationObjectName;
                })) {
                  arrIn.push({
                    "_value": objTmp
                  });
                }

                objOut.DatabaseRelations = {
                  "_value": {
                    "Relation": arrIn
                  }
                };
                objOut;
          objIn:
            link: Parse vdb XML/object/VirtualDB/_value/DatabaseRelations/_value/Relation
            schema: '#ref'
            mandatory: false
          tables:
            const: '[{"table_name":"FABRIC_TDM_ROOT","column_name":"IID","active":true,"population":"FABRIC_TDM_ROOT.populationFabricTdmRoot.flow","id":"IID"},{"table_name":"TDM_BE_IIDS","column_name":"iid,source_env,be_id","active":true,"population":"TDM_BE_IIDS.populationTdmBeIID.flow","id":"iid,source_env,be_id"}]'
            schema: string
            mandatory: false
        out:
          result:
            schema: '#ref'
      Add TDM Populations:
        parent: JavaScript
        in:
          script:
            const:
              userCode: |
                var arrIn = [];
                var arrIn2 = [];
                var objTmp = [];
                var objTmp2 = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];
                var popOrder;

                if (objIn != null) {
                  arrIn = [ ...objIn ];
                }

                if (!arrIn.some(item => item._attributes && item._attributes.name === 'TDM_BE_IIDS')) {
                  arrIn.push({
                    "_attributes": { "name": 'TDM_BE_IIDS' },
                    "_value": {
                      "Populations": {
                        "_value": {
                          "Population": {
                            "_attributes": {
                              "name": "populationTdmBeIID.flow",
                              "order": "1000",
                              "disabled": "false",
                              "populationType": "Flow"
                            }
                          }
                        }
                      }
                    }
                  });
                }

                objOut.TablesProperties = {"_value" : { "TableProperties": arrIn }};
                objOut;
              script: |-
                var arrIn = [];
                var arrIn2 = [];
                var objTmp = [];
                var objTmp2 = [];
                var objOut = {};
                var tableObj = {};
                var tablesObjt = [];
                var popOrder;

                if (objIn != null) {
                  arrIn = [].concat(objIn);
                }

                if (!arrIn.some(function (item) {
                  return item._attributes && item._attributes.name === 'TDM_BE_IIDS';
                })) {
                  arrIn.push({
                    "_attributes": {
                      "name": 'TDM_BE_IIDS'
                    },
                    "_value": {
                      "Populations": {
                        "_value": {
                          "Population": {
                            "_attributes": {
                              "name": "populationTdmBeIID.flow",
                              "order": "1000",
                              "disabled": "false",
                              "populationType": "Flow"
                            }
                          }
                        }
                      }
                    }
                  });
                }

                objOut.TablesProperties = {
                  "_value": {
                    "TableProperties": arrIn
                  }
                };
                objOut;
          objIn:
            link: Parse vdb XML/object/VirtualDB/_value/TablesProperties/_value/TableProperties
            schema: '#ref'
            mandatory: false
          tables:
            const: '[{"table_name":"FABRIC_TDM_ROOT","column_name":"IID","active":true,"population":"FABRIC_TDM_ROOT.populationFabricTdmRoot.flow","id":"IID"},{"table_name":"TDM_BE_IIDS","column_name":"iid,source_env,be_id","active":true,"population":"TDM_BE_IIDS.populationTdmBeIID.flow","id":"iid,source_env,be_id"}]'
            schema: string
            mandatory: false
        out:
          result:
            schema: '#ref'
  Merge With Original Schema:
    actors:
      Merge with Original XML:
        parent: MapMerge
        in:
          maps:
            link:
            - path: Parse vdb XML/object/VirtualDB/_value
              pos: 0
            - path: Add TDM tables/result
              pos: 1
            - path: Add TDM Populations/result
              pos: 2
            - path: Set TDM Diagram Graph/result
              pos: 3
            - path: Set TDM Tables Relations/result
              pos: 4
            mandatory: false
        out:
          map:
            schema: '#ref'
  Prepare To Parse:
    actors:
      Add back version tag:
        parent: JavaScript
        in:
          script:
            const:
              userCode: "var objOut = {};\r\nvar objTmp = {};\r\n\r\nobjTmp._attributes\
                \ = vdbAttr;\r\nobjOut.VirtualDB = objTmp;\r\n\r\nobjTmp._value =\
                \ newXML;\r\nobjOut.VirtualDB = objTmp;\r\n\r\nobjOut.VirtualDB._value.RootView._value='FABRIC_TDM_ROOT';\r\
                \n\r\nobjOut;"
              script: |-
                var objOut = {};
                var objTmp = {};
                objTmp._attributes = vdbAttr;
                objOut.VirtualDB = objTmp;
                objTmp._value = newXML;
                objOut.VirtualDB = objTmp;
                objOut.VirtualDB._value.RootView._value = 'FABRIC_TDM_ROOT';
                objOut;
          newXML:
            link: Merge with Original XML/map
            schema: '#ref'
            mandatory: false
          vdbAttr:
            link: Parse vdb XML/object/VirtualDB/_attributes
            schema: '#ref'
            mandatory: false
        out:
          result:
            schema: '#ref'
  Covert To Schema:
    actors:
      Convert Obj to XML:
        parent: XmlStringify
        in:
          object:
            link: Add back version tag/result
  Save Schema:
    actors:
      Save vdb File:
        parent: FileWrite
        in:
          interface:
            const: null
            link: LU folder/string
          path:
            const: vdb.k2vdb.xml
          stream:
            link: Convert Obj to XML/xmlString
schemas:
  Parse vdb XML.out.object:
    type: object
    properties:
      VirtualDB:
        type: object
        properties:
          _attributes:
            type: object
            properties:
              version:
                type: string
          _value:
            type: object
            properties:
              Name:
                type: object
                properties:
                  _value:
                    type: string
              RootView:
                type: object
                properties:
                  _value:
                    type: string
              CacheLocationType:
                type: object
                properties:
                  _value:
                    type: string
              LuLazyDataUpdate:
                type: object
                properties:
                  _attributes:
                    type: object
                    properties:
                      performEvery:
                        type: string
                      syncMethod:
                        type: string
                      syncTimeout:
                        type: string
                  _value:
                    type: object
                    properties:
                      DecisionFunction:
                        type: object
                        properties: {
                          }
              EventsList:
                type: object
                properties: {
                  }
              IidFinderProp:
                type: object
                properties:
                  _attributes:
                    type: object
                    properties:
                      enabled:
                        type: string
                  _value:
                    type: object
                    properties:
                      NumberOfPartitions:
                        type: object
                        properties:
                          _value:
                            type: string
                      NumberOfJobs:
                        type: object
                        properties:
                          _value:
                            type: string
              Tables:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      Table:
                        type: array
                        items:
                          type: object
                          properties:
                            _value:
                              type: string
              TablesProperties:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      TableProperties:
                        type: array
                        items:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                name:
                                  type: string
                            _value:
                              type: object
                              properties:
                                Populations:
                                  type: object
                                  properties:
                                    _value:
                                      type: object
                                      properties:
                                        Population:
                                          type: object
                                          properties:
                                            _attributes:
                                              type: object
                                              properties:
                                                disabled:
                                                  type: string
                                                name:
                                                  type: string
                                                order:
                                                  type: string
                                                populationType:
                                                  type: string
              EnrichmentsOrderList:
                type: object
                properties: {
                  }
              ReferencesList:
                type: object
                properties: {
                  }
              Relations:
                type: object
                properties: {
                  }
              DatabaseRelations:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      Relation:
                        type: array
                        items:
                          type: object
                          properties:
                            _value:
                              type: object
                              properties:
                                From:
                                  type: object
                                  properties:
                                    _attributes:
                                      type: object
                                      properties:
                                        column:
                                          type: string
                                        columnId:
                                          type: string
                                        table:
                                          type: string
                                        tableType:
                                          type: string
                                To:
                                  type: object
                                  properties:
                                    _attributes:
                                      type: object
                                      properties:
                                        column:
                                          type: string
                                        columnId:
                                          type: string
                                        populationObjectName:
                                          type: string
                                        table:
                                          type: string
                                        tableType:
                                          type: string
              DiagramGraph:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      Graph:
                        type: object
                        properties:
                          _attributes:
                            type: object
                            properties:
                              name:
                                type: string
                          _value:
                            type: object
                            properties:
                              Group:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    _attributes:
                                      type: object
                                      properties:
                                        expanded:
                                          type: string
                                        name:
                                          type: string
                                        pos:
                                          type: string
                                        size:
                                          type: string
                                        wasexpanded:
                                          type: string
                                    _value:
                                      type: object
                                      properties:
                                        Node:
                                          type: array
                                          items:
                                            type: object
                                            properties:
                                              _attributes:
                                                type: object
                                                properties:
                                                  name:
                                                    type: string
                                                  pos:
                                                    type: string
                                                  viewType:
                                                    type: string
  Parse vdb XML.out.info:
    type: object
    properties:
      version:
        type: string
      standalone:
        type: boolean
      header:
        type: string
  Add TDM tables.in.objIn:
    type: object
    properties: {
      }
  Add TDM tables.out.result:
    type: object
    properties:
      Tables:
        type: object
        properties:
          _value:
            type: object
            properties:
              Table:
                type: array
                items:
                  type: object
                  properties:
                    _value:
                      type: string
  Set TDM Diagram Graph.in.objIn:
    type: object
    properties: {
      }
  Set TDM Diagram Graph.out.result:
    type: object
    properties:
      DiagramGraph:
        type: object
        properties:
          _value:
            type: object
            properties:
              Graph:
                type: object
                properties:
                  _attributes:
                    type: string
                  _value:
                    type: object
                    properties:
                      Group:
                        type: array
                        items:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                name:
                                  type: string
                                pos:
                                  type: string
                                size:
                                  type: string
                                wasexpanded:
                                  type: string
                                expanded:
                                  type: string
                            _value:
                              type: object
                              properties:
                                Node:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      _attributes:
                                        type: object
                                        properties:
                                          name:
                                            type: string
                                          pos:
                                            type: string
                                          size:
                                            type: string
                                          listGroupSize:
                                            type: string
                                          viewType:
                                            type: string
  Set TDM Tables Relations.in.objIn:
    type: object
    properties: {
      }
  Set TDM Tables Relations.out.result:
    type: object
    properties:
      DatabaseRelations:
        type: object
        properties:
          _value:
            type: object
            properties:
              Relation:
                type: array
                items:
                  type: object
                  properties:
                    _value:
                      type: object
                      properties:
                        From:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                tableType:
                                  type: string
                                table:
                                  type: string
                                column:
                                  type: string
                                columnId:
                                  type: string
                        To:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                tableType:
                                  type: string
                                table:
                                  type: string
                                populationObjectName:
                                  type: string
                                column:
                                  type: string
                                columnId:
                                  type: string
  Add TDM Populations.in.objIn:
    type: object
    properties: {
      }
  Add TDM Populations.out.result:
    type: object
    properties:
      TablesProperties:
        type: object
        properties:
          _value:
            type: object
            properties:
              TableProperties:
                type: array
                items:
                  type: object
                  properties:
                    _attributes:
                      type: object
                      properties:
                        name:
                          type: string
                    _value:
                      type: object
                      properties:
                        Populations:
                          type: object
                          properties:
                            _value:
                              type: object
                              properties:
                                Population:
                                  type: object
                                  properties:
                                    _attributes:
                                      type: object
                                      properties:
                                        name:
                                          type: string
                                        order:
                                          type: string
                                        disabled:
                                          type: string
                                        populationType:
                                          type: string
  Merge with Original XML.out.map:
    type: object
    properties:
      Name:
        type: object
        properties:
          _value:
            type: string
      RootView:
        type: object
        properties:
          _value:
            type: string
      LuLazyDataUpdate:
        type: object
        properties:
          _attributes:
            type: object
            properties:
              syncMethod:
                type: string
              performEvery:
                type: string
      EventsList:
        type: object
        properties: {
          }
      IidFinderProp:
        type: object
        properties:
          _value:
            type: object
            properties:
              NumberOfPartitions:
                type: object
                properties:
                  _value:
                    type: string
              NumberOfJobs:
                type: object
                properties:
                  _value:
                    type: string
      Tables:
        type: object
        properties:
          _value:
            type: object
            properties:
              Table:
                type: array
                items:
                  type: object
                  properties:
                    _value:
                      type: string
      TablesProperties:
        type: object
        properties:
          _value:
            type: object
            properties:
              TableProperties:
                type: array
                items:
                  type: object
                  properties:
                    _attributes:
                      type: object
                      properties:
                        name:
                          type: string
                    _value:
                      type: object
                      properties:
                        Populations:
                          type: object
                          properties:
                            _value:
                              type: object
                              properties:
                                Population:
                                  type: object
                                  properties:
                                    _attributes:
                                      type: object
                                      properties:
                                        name:
                                          type: string
                                        order:
                                          type: string
                                        disabled:
                                          type: string
                                        populationType:
                                          type: string
      EnrichmentsOrderList:
        type: object
        properties: {
          }
      ReferencesList:
        type: object
        properties: {
          }
      Relations:
        type: object
        properties: {
          }
      DatabaseRelations:
        type: object
        properties:
          _value:
            type: object
            properties:
              Relation:
                type: array
                items:
                  type: object
                  properties:
                    _value:
                      type: object
                      properties:
                        From:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                tableType:
                                  type: string
                                table:
                                  type: string
                                column:
                                  type: string
                                columnId:
                                  type: string
                        To:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                tableType:
                                  type: string
                                table:
                                  type: string
                                populationObjectName:
                                  type: string
                                column:
                                  type: string
                                columnId:
                                  type: string
      PreVCsSqlScript:
        type: object
        properties: {
          }
      PostVCsSqlScript:
        type: object
        properties: {
          }
      Indexes:
        type: object
        properties: {
          }
      LudbProperties:
        type: object
        properties: {
          }
      DiagramGraph:
        type: object
        properties:
          _value:
            type: object
            properties:
              Graph:
                type: object
                properties:
                  _attributes:
                    type: object
                    properties:
                      version:
                        type: string
                      name:
                        type: string
                  _value:
                    type: object
                    properties:
                      Node:
                        type: array
                        items:
                          type: object
                          properties:
                            _attributes:
                              type: object
                              properties:
                                name:
                                  type: string
                                pos:
                                  type: string
                                size:
                                  type: string
                                listGroupSize:
                                  type: string
                                viewType:
                                  type: string
  Add back version tag.in.newXML:
    type: object
    properties:
      Name:
        type: object
        properties: {
          }
      RootView:
        type: object
        properties: {
          }
      LuLazyDataUpdate:
        type: object
        properties: {
          }
      EventsList:
        type: object
        properties: {
          }
      IidFinderProp:
        type: object
        properties: {
          }
      Tables:
        type: object
        properties: {
          }
      TablesProperties:
        type: object
        properties: {
          }
      EnrichmentsOrderList:
        type: object
        properties: {
          }
      ReferencesList:
        type: object
        properties: {
          }
      Relations:
        type: object
        properties: {
          }
      DatabaseRelations:
        type: object
        properties: {
          }
      PreVCsSqlScript:
        type: object
        properties: {
          }
      PostVCsSqlScript:
        type: object
        properties: {
          }
      Indexes:
        type: object
        properties: {
          }
      LudbProperties:
        type: object
        properties: {
          }
      DiagramGraph:
        type: object
        properties: {
          }
  Add back version tag.in.vdbAttr:
    type: object
    properties:
      version:
        type: string
  Add back version tag.out.result:
    type: object
    properties:
      VirtualDB:
        type: object
        properties:
          _attributes:
            type: object
            properties:
              version:
                type: string
          _value:
            type: object
            properties:
              Name:
                type: object
                properties:
                  _value:
                    type: string
              RootView:
                type: object
                properties:
                  _value:
                    type: string
              LuLazyDataUpdate:
                type: object
                properties:
                  _attributes:
                    type: object
                    properties:
                      syncMethod:
                        type: string
                      performEvery:
                        type: string
              EventsList:
                type: object
                properties: {
                  }
              IidFinderProp:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      NumberOfPartitions:
                        type: object
                        properties:
                          _value:
                            type: string
                      NumberOfJobs:
                        type: object
                        properties:
                          _value:
                            type: string
              Tables:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      Table:
                        type: array
                        items:
                          type: object
                          properties:
                            _value:
                              type: string
              TablesProperties:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      TableProperties:
                        type: object
                        properties:
                          _attributes:
                            type: object
                            properties:
                              name:
                                type: string
                          _value:
                            type: object
                            properties:
                              Populations:
                                type: object
                                properties:
                                  _value:
                                    type: object
                                    properties:
                                      Population:
                                        type: object
                                        properties:
                                          _attributes:
                                            type: object
                                            properties:
                                              name:
                                                type: string
                                              order:
                                                type: string
                                              disabled:
                                                type: string
                                              populationType:
                                                type: string
              EnrichmentsOrderList:
                type: object
                properties: {
                  }
              ReferencesList:
                type: object
                properties: {
                  }
              Relations:
                type: object
                properties: {
                  }
              DatabaseRelations:
                type: object
                properties: {
                  }
              PreVCsSqlScript:
                type: object
                properties: {
                  }
              PostVCsSqlScript:
                type: object
                properties: {
                  }
              Indexes:
                type: object
                properties: {
                  }
              LudbProperties:
                type: object
                properties: {
                  }
              DiagramGraph:
                type: object
                properties:
                  _value:
                    type: object
                    properties:
                      Graph:
                        type: object
                        properties:
                          _attributes:
                            type: object
                            properties:
                              version:
                                type: string
                              name:
                                type: string
                          _value:
                            type: object
                            properties:
                              Node:
                                type: object
                                properties:
                                  _attributes:
                                    type: object
                                    properties:
                                      name:
                                        type: string
                                      pos:
                                        type: string
                                      size:
                                        type: string
                                      listGroupSize:
                                        type: string
                                      viewType:
                                        type: string
