tags: Create
stages:
  Stage 1:
    actors:
      Get  SQL Resource File To Create TDMDB Schema And User:
        parent: LuFunction
        in:
          functionName:
            const: loadFromLUResource
          path:
            const: TDM/TDMDB/k2vtdm0.sql
            schema: string
            mandatory: false
        out:
          result:
            schema: blob
  Stage 2:
    actors:
      Create TDMDB Error Handler:
        parent: ErrorHandler
        error: result
        in:
          config:
            const:
            - exceptionKey: com.k2view.fabric.common.io.basic.exception.StandardSqlException
              conditions:
                standardType: UNIQUE_CONSTRAINT
              actions:
                suppress: false
                log: true
                flowName: ''
      Create TDMDB Role:
        parent: DbCommand
        in:
          interface:
            const: POSTGRESQL_ADMIN
          sql:
            const: null
            link: Get  SQL Resource File To Create TDMDB Schema And User/result
  Stage 3:
    actors:
      Get  SQL Resource File To Create TDMDB Schema And User1:
        parent: LuFunction
        in:
          functionName:
            const: loadFromLUResource
          path:
            const: TDM/TDMDB/k2vtdm1.sql
            schema: string
            mandatory: false
        out:
          result:
            schema: blob
  Stage 4:
    actors:
      Create TDMDB Error Handler1:
        parent: ErrorHandler
        error: result
        in:
          config:
            const:
            - exceptionKey: com.k2view.fabric.common.io.basic.exception.StandardSqlException
              conditions:
                standardType: UNIQUE_CONSTRAINT
              actions:
                suppress: false
                log: true
                flowName: ''
      Create TDMDB Databse:
        parent: DbCommand
        in:
          interface:
            const: POSTGRESQL_ADMIN
          sql:
            const: null
            link: Get  SQL Resource File To Create TDMDB Schema And User1/result
